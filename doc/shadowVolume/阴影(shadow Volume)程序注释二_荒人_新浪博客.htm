<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0087)http://blog.sina.com.cn/s/blog_4ad0f8b4010004wt.html~type=v5_one&label=rela_nextarticle -->
<HTML xmlns="http://www.w3.org/1999/xhtml"><HEAD><META http-equiv="Content-Type" content="text/html; charset=UTF-8">

<META http-equiv="X-UA-Compatible" content="IE=EmulateIE7">
<META name="description" content="朱目懒马的不落戈,,下面是ShadowCalculator.cpp文件#include&lt;d3dx9.h&gt;#include&lt;stdio.h&gt;#include&#39;ShadowCalculator.h&#39;#include&#39;CMesh.h&#39;VOIDShadowVolume::Reset(){m_dwNumVertices=0L;}//-----------------------------------------------------------------------------//Name:AddEdge()//Desc:添加边到形成阴影轮廓的边集中//-----------------------------------------------------------------------------VOIDShadowVolume::AddEdg">
<META name="keywords" content="朱目懒马的不落戈,,">
<TITLE>阴影(shadow Volume)程序注释二_荒人_新浪博客</TITLE>
<SCRIPT>
var scope = {
	$uid : "1255209140",
	$PRODUCT_NAME : "blog",
	$pageid : "article",
	$key :  "0e6c5203d0bcb1d346b5bc58468f3cb6",
	$sort_id : "117",
    $loadconf : true,
	$flag2008 : "0",
	$articleid : "4ad0f8b4010004wt" ,
	$isCommentAllow : "1"
};
var	$encrypt_code = "9c3661ab676c97a405c29f22afce618e";
var config = {"common":{"t":"1_2","r":0,"head":[],"bg":[],"pageset":0,"invitationset":0},"private":{"cms":0,"blogsize":0,"ad":0,"sms":0,"adver":0,"tj":0},"component":{"c1":[901,3,1002,1,2,1001,12,17],"c2":[],"x":2},"product":{"c":24,"j":18}};
var fav = {"4ad0f8b4010004wt":"71341bda167a1578c316ea98171b2433"} ;
</SCRIPT>

<STYLE>.MASSad24f6d8e59f{display:none}</STYLE>
<SCRIPT type="text/javascript" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/boot.js"></SCRIPT><SCRIPT id="" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/combine" charset="utf-8"></SCRIPT><SCRIPT id="" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/config.js" charset="UTF-8"></SCRIPT>
<SCRIPT type="text/javascript">loadCss();</SCRIPT><LINK id="" rel="stylesheet" type="text/css" href="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/default.css"><LINK id="" rel="stylesheet" type="text/css" href="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/blog.css"><LINK id="themeLink" rel="stylesheet" type="text/css" href="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/t.css">
<SCRIPT src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/platform_tray.compressed.js"></SCRIPT>

<LINK href="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/im.css" type="text/css" rel="stylesheet">

<!--# block name="blk737369" --><!--# endblock -->
<!--#include file="/hits?act=4&aid=${aid}" stub="blk737369" --> 
<SCRIPT type="text/javascript" charset="utf-8" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/uic"></SCRIPT><SCRIPT type="text/javascript" charset="utf-8" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/Query.php"></SCRIPT><SCRIPT type="text/javascript" charset="utf-8" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/hits"></SCRIPT><SCRIPT type="text/javascript" charset="utf-8" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/listhtml.php"></SCRIPT></HEAD><BODY>
<DIV id="sinatopbar">
<SCRIPT type="text/javascript">
<!--
	document.write(SinaSysTray.getHTML());
//-->
</SCRIPT><DIV class="sinatopbar" id="login_bar_1481">  <DIV class="stb">		<!--产品Logo-->     <DIV class="logo" title="返回新浪博客首页"><A id="login_bar_logo_link_1481" href="http://blog.sina.com.cn/" target="_blank" class="logoPic lp_blog"></A></DIV>       <DIV class="stbcen">       <!--运营导航-->       <DIV class="st_Jh_vblog_nologin">			<SPAN class="v1" id="login_yunying_span_1481"><A href="http://blog.sina.com.cn/" id="login_operation_first_btn_1481" target="_blank">博客首页</A></SPAN>           <SPAN class="Mb_line"></SPAN>           <SPAN class="v2" id="login_bar_operation_span_1481"><A href="http://blog.sina.com.cn/lm/rank/index.html" id="login_operation_second_btn_1481" target="_blank">排行榜</A></SPAN>			<SPAN class="v2" style="display:none;" id="login_bar_video_btn_1481"><A href="javascript:;" id="login_bar_video_1481"><STRONG>点播单</STRONG><EM>(0)</EM></A><INPUT type="hidden" id="video_number_1481" value="0"></SPAN>           <SPAN class="vAd" id="login_ad_content_1481"><A target="_blank" href="http://blog.sina.com.cn/lm/z/zhuliugan/index.html">H1N1流感隔离者博客</A></SPAN>       </DIV>		<!--登陆按钮-->       <DIV class="stblog">               <SPAN class="stblog1"><INPUT type="button" value="登录" id="login_login_btn_1481" style="cursor: pointer"></SPAN>               <SPAN class="stbline_j"></SPAN>               <SPAN class="stblog2"><A href="http://login.sina.com.cn/hd/reg.php?entry=blog" id="login_reg_btn_1481" target="_blank">注册</A></SPAN>       </DIV>       </DIV>		<DIV class="t_help">          <SPAN class="stb_sosline"></SPAN>          <SPAN class="helplink">				<A id="login_help_link_1481" href="http://blog.sina.com.cn/lm/help/2009/index.html" target="_blank">帮助</A>			</SPAN>		</DIV>		<!--搜索区域-->       <DIV class="stbsea"><FORM id="login_bar_search_form_1481" method="get" target="_blank" action="http://uni.sina.com.cn/c.php"><DIV style="overflow:hidden">            <INPUT name="ie" value="utf-8" type="hidden"><INPUT name="e" value="utf8" type="hidden" style="width:0px;"><INPUT name="k" value="" type="hidden" id="login_bar_search_hide_k_1481" style="width:0px;"><INPUT name="ts" value="" type="hidden" id="login_bar_search_hide_ts_1481" style="width:0px;"><INPUT name="key" value="" type="hidden" id="login_bar_search_hide_key_1481">            <INPUT name="keyword" value="" type="hidden" style="width:0px;" id="login_bar_search_hide_key_word_1481"><INPUT name="t" value="blog" type="hidden" id="login_bar_search_hide_t_1481" style="width:0px;"></DIV><DIV class="sts1" style="background:url(http://simg.sinajs.cn/common/images/sinatopbar/090315_bg2.gif) no-repeat; background-position:2px 0px;*background-position:2px 2px; width:117px; padding:0px 0px 0px 4px; height:24px;"><INPUT type="text" class="stinp1" style="background:none transparent; height:18px; padding:2px 0px 2px 2px; width:109px;" id="login_bar_search_input_1481"></DIV><DIV class="sts2"><DIV class="anainp" id="login_bar_search_menu_label_1481">博文</DIV><DIV class="arrow" id="login_bar_search_menu_arrow_1481"></DIV></DIV><DIV class="sts3"><INPUT class="suba" type="submit" value="搜索"></DIV></FORM></DIV>   </DIV><DIV class="layerBox layerBox_Md_1" id="search_menu_1481" style="position: absolute; z-index: 1000; display: none; ">	<UL class="layerIn_No_1">		<LI class="bottomline"><A href="javascript:;" b_value="space" style="text-decoration:none;">综合&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</A></LI>		<LI><A href="javascript:;" b_value="blog" style="text-decoration:none;">博文&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</A></LI>		<LI><A href="javascript:;" b_value="bauthor" style="text-decoration:none;">博主&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</A></LI>		<LI><A href="javascript:;" b_value="photo" style="text-decoration:none;">图片&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</A></LI>		<LI><A href="javascript:;" b_value="music" style="text-decoration:none;">音乐&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</A></LI>		<LI><A href="javascript:;" b_value="vblog" style="text-decoration:none;">视频&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</A></LI>		<LI class="bottomline"><A href="javascript:;" b_value="vauthor" style="text-decoration:none;">播主&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</A></LI>		<LI><A href="javascript:;" b_value="tiezi" style="text-decoration:none;">论坛&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</A></LI>		<LI><A href="javascript:;" b_value="bar" style="text-decoration:none;">新浪吧&nbsp;&nbsp;&nbsp;</A></LI>		<LI><A href="javascript:;" b_value="quanzi" style="text-decoration:none;">圈子&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</A></LI>	</UL></DIV></DIV>
</DIV>
<SCRIPT type="text/javascript">
<!--
	SinaSysTray.base_init({
		"type" : scope.$PRODUCT_NAME || "",
		"uid" : $UID || "0"
	});
//-->
</SCRIPT>
<DIV class="wrapper">
  <DIV class="headpic100" id="headpic100">
<DIV class="headpic950" id="headPic950">
<DIV class="toppicflash" id="toppicflash">
</DIV>
  <DIV class="ntoptitle" id="ntoptitle"> 
  <DIV class="ntopns" id="blogTitle">
  <DIV class="ntitname" id="blogname"><A href="http://blog.sina.com.cn/zhumulanma">朱目懒马的不落戈</A>
   </DIV>
   <DIV class="ntitsite">http://blog.sina.com.cn/zhumulanma<A id="SubscribeNewRss" href="http://blog.sina.com.cn/s/blog_4ad0f8b4010004wt.html~type=v5_one&label=rela_nextarticle#" class="CP_a_fuc" onclick="return false;">[<CITE>订阅</CITE>]</A></DIV> 
  </DIV>
  </DIV>

</DIV>
<DIV class="termenubg"></DIV>
  <DIV class="termenu">
  <DIV class="termenuc" id="clone_template">
    <DIV class="termenutag">
     <DIV class="user">
     <DIV class="userhead"><A href="http://blog.sina.com.cn/zhumulanma"><IMG src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/50" title="返回荒人的博客个人首页" alt="返回荒人的博客个人首页"></A></DIV><DIV class="username"><A style="cursor:hand;" href="http://blog.sina.com.cn/zhumulanma"><SPAN id="nav_name">荒人</SPAN></A></DIV>
     </DIV>
	 
     <DIV class="promenu">
     <LI class="on"><SPAN id="nav_blog"><A href="http://blog.sina.com.cn/zhumulanma">博客</A></SPAN></LI>     
     <LI><SPAN id="nav_photo"><A href="http://photo.blog.sina.com.cn/zhumulanma">相册</A></SPAN></LI>
     <LI><SPAN id="nav_music"><A href="http://music.sina.com.cn/m/1255209140">音乐</A></SPAN></LI>
     <LI><SPAN id="nav_vblog"><A href="http://you.video.sina.com.cn/zhumulanma">播客</A></SPAN></LI>
	 <LI><SPAN id="nav_tiezi"><A href="http://profile.blog.sina.com.cn/zhumulanma">个人中心</A></SPAN></LI>
	 <!--   <li><span id="nav_quanzi"><a href="http://q.sina.com.cn/m/zhumulanma">圈子</a></span></li>-->
     </DIV>
    </DIV>
    <DIV class="termenutxt">
    <DIV class="tmtcen">
        <DIV class="floatLeft">
        <SPAN><A href="http://blog.sina.com.cn/zhumulanma">首页</A></SPAN><SPAN class="linesp"></SPAN><SPAN><A href="http://blog.sina.com.cn/s/articlelist_1255209140_0_1.html">博文</A></SPAN><SPAN class="linesp"></SPAN><SPAN><A href="http://blog.sina.com.cn/s/favourites_1255209140_1.html">收藏</A></SPAN><SPAN class="linesp"></SPAN><SPAN><A href="http://profile.blog.sina.com.cn/circle.php?uid=1255209140&page=1&type=3">博客圈</A></SPAN><!--<span >  <a href="http://blog.sina.com.cn/lm/rank/index.html" target="_blank">排行榜</a></span>--></DIV>
        <DIV class="floatRight">
        
        </DIV>
    </DIV>
    </DIV>
  </DIV>
  </DIV>
</DIV>
  <DIV class="contentLayout">
    
      <DIV class="column_2 floatLeft">
<DIV id="advertise_top" class="components730 SinaAd_hide"></DIV>
<DIV class="components730">
        <DIV class="component">
          <DIV class="componentBar">
                <SPAN class="floatRight articleFontSize" id="articleFontManage">字体大小：<A onclick="changeFontSize(2);return false;" href="">大</A><B>中</B><A onclick="changeFontSize(0);return false;" href="">小</A></SPAN>
                <SPAN class="title">正文</SPAN>
                
            </DIV>
<DIV class="componentContent article"><DIV class="comconblog"> 
<DIV class="articleTitle">
<DIV style="display: inline;">
<B id="t_4ad0f8b4010004wt">阴影(shadow&nbsp;Volume)程序注释二</B><SPAN class="time">(2006-09-17 20:10:48)</SPAN></DIV></DIV>
<DIV class="articleTag">
<TABLE width="100%" border="0" cellspacing="0" cellpadding="0">
<TBODY><TR>
<TD>
<SCRIPT>
var $tag='';
var $tag_code='aff4cc1c490eb9454d6cd5b45dda0690';
</SCRIPT>
&nbsp;
</TD>
<TD width="250" align="right" valign="top">分类：<A href="http://blog.sina.com.cn/s/articlelist_1255209140_2_1.html">游戏开发</A></TD>
</TR></TBODY>
</TABLE>
</DIV>
<DIV class="articleContent" id="articleBody">
<P>下面是ShadowCalculator.cpp文件<BR>
<BR>
#include &lt;d3dx9.h&gt;<BR>
#include &lt;stdio.h&gt;<BR>
#include "ShadowCalculator.h"<BR>
#include "CMesh.h"<BR>
<BR>
VOID ShadowVolume::Reset() {<BR>
m_dwNumVertices = 0L;<BR>
}<BR>
<BR>
//-----------------------------------------------------------------------------<BR>

// Name: AddEdge()<BR>
// Desc: 添加边到形成阴影轮廓的边集中<BR>
//-----------------------------------------------------------------------------<BR>

VOID ShadowVolume::AddEdge( WORD* pEdges, DWORD&amp; dwNumEdges,
WORD v0, WORD v1 )<BR>
{<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> // Remove
interior edges (which appear in the list twice)<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> //
当该边属于两个可见三角行时，说明该边位于形成阴影边界的边的内部。所以删除<BR>

&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> for( DWORD
i=0; i &lt; dwNumEdges; i++ )<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> {<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
if( ( pEdges[2*i+0] == v0 &amp;&amp; pEdges[2*i+1] == v1 ) ||<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
( pEdges[2*i+0] == v1 &amp;&amp; pEdges[2*i+1] == v0 ) )<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
{<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
if( dwNumEdges &gt; 1 )<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
{<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
pEdges[2*i+0] = pEdges[2*(dwNumEdges-1)+0];<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
pEdges[2*i+1] = pEdges[2*(dwNumEdges-1)+1];<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
}<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
dwNumEdges--;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
return;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
}<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> }<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
pEdges[2*dwNumEdges+0] = v0;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
pEdges[2*dwNumEdges+1] = v1;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
dwNumEdges++;<BR>
}<BR>
<BR>
<BR>
//-----------------------------------------------------------------------------<BR>

// Name: BuildFromMesh()<BR>
// Desc:
根据Mesh和光线方向向量生成形成阴影的廓的边集，再由边集和光线方向向量<BR>

//&nbsp;<WBR>生成阴影椎，并将构成阴影椎的四个顶点按D3DPT_TRIANGLELIST方式存放到顶<BR>

//&nbsp;<WBR>点列表中，以待渲染。<BR>
//-----------------------------------------------------------------------------<BR>

HRESULT ShadowVolume::BuildFromMesh( CMesh* pMeshClass, D3DXVECTOR3
vLight )<BR>
{<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> // Note: the
MESHVERTEX format depends on the FVF of the mesh<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> struct
MESHVERTEX { D3DXVECTOR3 p, n; FLOAT tu, tv; };<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> LPD3DXMESH
pMesh = pMeshClass-&gt;getMesh();<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> MESHVERTEX*
pVertices;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
WORD*&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
pIndices;<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> // Lock the
geometry buffers<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
pMesh-&gt;LockVertexBuffer( 0L, (LPVOID*)&amp;pVertices );<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
pMesh-&gt;LockIndexBuffer( 0L, (LPVOID*)&amp;pIndices );<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> DWORD
dwNumFaces&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> =
pMesh-&gt;GetNumFaces();<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> // Allocate
a temporary edge list<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> WORD* pEdges
= new WORD[dwNumFaces*6];<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> if( pEdges
== NULL )<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> {<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
pMesh-&gt;UnlockVertexBuffer();<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
pMesh-&gt;UnlockIndexBuffer();<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
return E_OUTOFMEMORY;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> }<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> DWORD
dwNumEdges = 0;<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> //
根据Mesh和光线方向向量生成形成阴影的廓的边集<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> //
遍历模型的每个面<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> for( DWORD
i=0; i&lt;dwNumFaces; i++ )<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> {<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
WORD wFace0 = pIndices[ 3 * i + 0 ];<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
WORD wFace1 = pIndices[ 3 * i + 1 ];<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
WORD wFace2 = pIndices[ 3 * i + 2 ];<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
D3DXVECTOR3 v0 = pVertices[ wFace0 ].p;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
D3DXVECTOR3 v1 = pVertices[ wFace1 ].p;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
D3DXVECTOR3 v2 = pVertices[ wFace2 ].p;<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
// 求面法线向量<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
D3DXVECTOR3 vCross1(v2-v1);<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
D3DXVECTOR3 vCross2(v1-v0);<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
D3DXVECTOR3 vNormal;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
D3DXVec3Cross( &amp;vNormal, &amp;vCross1, &amp;vCross2 );<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
// 根据面法线和光方向向量的点积判断该三角面是否可见<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
// 将可见三角型的边添加到边集中。<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
if( D3DXVec3Dot( &amp;vNormal, &amp;vLight ) &gt;= 0.0f )<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
{<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
AddEdge( pEdges, dwNumEdges, wFace0, wFace1 );<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
AddEdge( pEdges, dwNumEdges, wFace1, wFace2 );<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
AddEdge( pEdges, dwNumEdges, wFace2, wFace0 );<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
}<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> }<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> //
由边集和光线方向向量生成阴影椎，并将构成阴影椎的四个顶<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> //
点按D3DPT_TRIANGLELIST方式存放到顶点列表中，以待渲染。<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> for(DWORD
i=0; i&lt;dwNumEdges; i++ )<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> {<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
D3DXVECTOR3 v1 = pVertices[pEdges[2*i+0]].p;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
D3DXVECTOR3 v2 = pVertices[pEdges[2*i+1]].p;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
D3DXVECTOR3 v3 = v1 - vLight*500;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
D3DXVECTOR3 v4 = v2 - vLight*500;<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
// Add a quad (two triangles) to the vertex list<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
m_pVertices[m_dwNumVertices++] = v1;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
m_pVertices[m_dwNumVertices++] = v2;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
m_pVertices[m_dwNumVertices++] = v3;<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
m_pVertices[m_dwNumVertices++] = v2;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
m_pVertices[m_dwNumVertices++] = v4;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
m_pVertices[m_dwNumVertices++] = v3;<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> }<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> // Delete
the temporary edge list<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> delete[]
pEdges;<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> // Unlock
the geometry buffers<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
pMesh-&gt;UnlockVertexBuffer();<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
pMesh-&gt;UnlockIndexBuffer();<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> return
S_OK;<BR>
}<BR>
<BR>
//-----------------------------------------------------------------------------<BR>

// Name: Render()<BR>
// Desc: 在渲染这些阴影椎时, 确保 stencil
buffer（摸板缓冲）已经正确配置<BR>
//-----------------------------------------------------------------------------<BR>

HRESULT ShadowVolume::Render( LPDIRECT3DDEVICE9 pd3dDevice )<BR>
{<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
pd3dDevice-&gt;SetFVF( D3DFVF_XYZ );<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
pd3dDevice-&gt;SetTransform( D3DTS_WORLD, &amp;m_matWorld );<BR>
<BR>
&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR> return
pd3dDevice-&gt;DrawPrimitiveUP(
D3DPT_TRIANGLELIST,&nbsp;<WBR>&nbsp;<WBR>&nbsp;<WBR>
m_dwNumVertices/3,&nbsp;<WBR> m_pVertices,
sizeof(D3DXVECTOR3) );<BR>
}&nbsp;<WBR>&nbsp;<WBR></P>

 </DIV>
<!--   -->
<DIV class="articleInfo floatLeft">						


<!--（<a href="http://my2008.sina.com.cn/blog/rule.html" target="_blank">规则</a>）<span class="space12"></span>（<a href="#" onclick="return false;"><span onclick="showMyRecord();">积分</span></a>）
<span class="space12"></span>//-->



                 
</DIV>
<DIV class="articleUtil floatRight"> 
<A>阅读</A><SPAN id="r_4ad0f8b4010004wt" class="sub">(107)</SPAN><SPAN class="space">|</SPAN><A href="http://blog.sina.com.cn/s/blog_4ad0f8b4010004wt.html~type=v5_one&label=rela_nextarticle#comment">评论</A><SPAN id="c_4ad0f8b4010004wt" class="sub">(0)</SPAN><SPAN class="space">|</SPAN><A id="f_4ad0f8b4010004wt" href="http://blog.sina.com.cn/s/blog_4ad0f8b4010004wt.html~type=v5_one&label=rela_nextarticle#" onclick="$articleManage(&#39;4ad0f8b4010004wt&#39;,5);return false;">收藏</A><SPAN id="fn_4ad0f8b4010004wt" class="sub">(0)</SPAN><SPAN class="space">|</SPAN><A href="http://blog.sina.com.cn/main_v5/ria/print.html?blog_id=blog_4ad0f8b4010004wt" target="_blank">打印</A><SPAN class="space">|</SPAN><A id="q_4ad0f8b4010004wt" onclick="$jubao(&#39;4ad0f8b4010004wt&#39;)" href="javascript:;">举报</A>
</DIV>
<DIV class="CP_j_linedot"></DIV>
<DIV class="articleContext">前一篇：<SPAN class="space6"></SPAN><A href="http://blog.sina.com.cn/s/blog_4ad0f8b4010004wu.html~type=v5_one&label=rela_prevarticle">阴影(shadow&nbsp;Volume)程序注释一</A><BR>后一篇：<SPAN class="space6"></SPAN><A href="http://blog.sina.com.cn/s/blog_4ad0f8b4010004wv.html~type=v5_one&label=rela_nextarticle">阴影(shadow&nbsp;Volume)程序注释三</A></DIV>
<DIV id="advertise_bottom" class="sinaPlan SinaAd_hide"></DIV>
<!-- 内容开始 -->
		             <DIV class="CP_cmtpost" id="CP_cmtpost_cms">
	<DIV class="CP_cmtt_d"><SPAN class="floatLeft"><STRONG>评论</STRONG>&nbsp;&nbsp;&nbsp;&nbsp;<A href="http://blog.sina.com.cn/lm/8/2009/0325/105340.html" target="_blank">重要提示：警惕虚假中奖信息，点击查看详情</A><EM><SPAN class="my2008" id="COMMENT_FIRST_HOT"></SPAN></EM><A name="comment"></A></SPAN><SPAN class="manage floatRight"><A href="http://blog.sina.com.cn/s/blog_4ad0f8b4010004wt.html~type=v5_one&label=rela_nextarticle#post" class="CP_a_fuc">[<CITE>发评论</CITE>]</A></SPAN>
                </DIV>
	
	<UL id="article_comment_list" class="CP_lis"><LI class="CP_litem"><DIV class="CP_cmt_none">暂无评论。</DIV></LI></UL> 
	<DIV id="commentPaging" class="CP_page" style="display: none; ">
			<UL class="CP_pages">
			</UL>
	</DIV>
	<A name="post"></A>	
	<DIV class="CP_cmtt_d marginTop_d1"> 
  <SPAN class="floatLeft"><STRONG>发评论</STRONG>&nbsp;&nbsp;&nbsp;&nbsp;<A href="http://widget.sina.com.cn/minisite/g3.html" target="_blank">玩疯狂白领赢G3笔记本</A></SPAN>
    <SPAN class="manage floatRight"></SPAN>
	</DIV>
<DIV class="CP_cmt_main">
<DIV class="CP_cmt_line1"><UL class="CP_cmt_info floatLeft" id="comment_wel" style="display:none;"><LI class="CP_cmt_nm_d" id="comment_wel2" style="display:none;">用户昵称:</LI></UL>
<UL class="CP_cmt_int_d floatRight">
<LI class="CP_cmt_int_img"><A class="" href="http://blog.sina.com.cn/s/blog_4ad0f8b4010004wt.html~type=v5_one&label=rela_nextarticle#" onclick="return false;"><IMG align="absmiddle" title="" alt="" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/CP_i.gif" class="CP_i CP_i_ins_smi"><CITE id="article_comment_insertSmile">插入表情</CITE></A></LI>
</UL></DIV>
<P class="CP_cmtxt_d"><TEXTAREA id="commentArea" class="commentArea"></TEXTAREA></P>
<UL class="CP_cmtpf">
	<LI class="CP_cmtnm">登录名：<INPUT type="text" id="login_name"></LI>
	<LI class="CP_cmtpw">密码：<INPUT type="password" id="login_pass"></LI>
	<LI><A href="http://login.sina.com.cn/getpass.html" target="_blank">找回密码</A></LI>
    <LI><A href="http://login.sina.com.cn/hd/reg.php?entry=shequ" target="_blank">注册</A></LI>
	<LI class="CP_cmtnm" style="display: none; " id="comment_anon">昵&nbsp;&nbsp;&nbsp;称：<INPUT type="text" id="comment_anonyous"></LI>
	<LI class="CP_cmt_any"><LABEL><INPUT type="checkbox" id="anonymity">匿名评论</LABEL></LI>
</UL>
<P class="CP_cmtvc"><EM>验证码：</EM><INPUT type="text" maxlength="4" class="checkwd" id="login_check"><IMG id="comment_check_img" border="0" align="absmiddle" alt="看不清楚数字吗？点击这里再试试。" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/checkwd_image.php"><SPAN id="audioCheckCont"><A style="margin-left:3px;" href="javascript:Module.AudioCheck.callAudioCheck();">收听验证码</A><IMG id="play_img" name="play_img" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/blank.gif" align="absmiddle" style="margin-right:2px;" height="15"><OBJECT classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=5,0,0,0" width="0" height="0" id="mp3_player" align="middle"><PARAM name="allowScriptAccess" value="always"><PARAM name="movie" value="http://simg.sinajs.cn/common/swf/mp3.swf"><PARAM name="quality" value="high"><PARAM name="bgcolor" value="#ffffff"><PARAM name="FlashVars" value="mp3URL=http://icp.cws.api.sina.com.cn/login/login_audio.php"><EMBED src="http://simg.sinajs.cn/common/swf/mp3.swf" flashvars="mp3URL=http://icp.cws.api.sina.com.cn/login/login_audio.php" quality="high" bgcolor="#ffffff" width="0" height="0" name="mp3_player" swliveconnect="true" align="middle" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"></OBJECT></SPAN></P>
<P class="CP_cmtsub"><A class="CP_a_btn CP_a_btn14 CP_a_btnsub" href="http://blog.sina.com.cn/s/blog_4ad0f8b4010004wt.html~type=v5_one&label=rela_nextarticle#" onclick="return false;"><CITE id="comment_post_btn">发评论</CITE><INPUT type="submit" value=""></A></P>
<P class="CP_cmtresv CP_txtc">以上网友发言只代表其个人观点，不代表新浪网的观点或立场。</P>
</DIV></DIV>
<!-- 内容结束 -->
          </DIV></DIV>
          <DIV class="componentBottom"></DIV>
        </DIV>
</DIV>
</DIV>

    
    <DIV class="gap floatLeft"></DIV>
    <DIV class="column_1 floatLeft">
    
      <DIV class="components210" id="column_1">
      <DIV id="adps000001"></DIV>
              <DIV class="component" id="module_903" load_style="1">
          <DIV class="componentBar">
          <SPAN class="title">相关博文</SPAN>
          </DIV>
          <DIV class="componentContent"><DIV class="recoatlis2"><UL>		<LI><P><A href="http://blog.sina.com.cn/s/blog_4cf123e60100adoe.html~type=v5_one&label=rela_articletagpub" target="_blank" title="紫竹方案2009年第21周">紫竹方案2009年第21周</A></P><P class="recoatlis_aut CP_linkb"><A href="http://blog.sina.com.cn/u/1290871782" target="_blank">山东紫竹</A></P></LI>		<LI><P><A href="http://blog.sina.com.cn/s/blog_499be5620100cne9.html~type=v5_one&label=rela_articletagpub" target="_blank" title="我的漫像">我的漫像</A></P><P class="recoatlis_aut CP_linkb"><A href="http://blog.sina.com.cn/u/1234953570" target="_blank">风之谷</A></P></LI>		<LI><P><A href="http://blog.sina.com.cn/s/blog_494dd20e0100ag8t.html~type=v5_one&label=rela_articletagpub" target="_blank" title="军中霸王花：陈燮霞完美表现勇">军中霸王花：陈燮霞完美表现勇</A></P><P class="recoatlis_aut CP_linkb"><A href="http://blog.sina.com.cn/u/1229836814" target="_blank">宋洁</A></P></LI>		<LI><P><A href="http://blog.sina.com.cn/s/blog_4c6cbe7b0100ajqy.html~type=v5_one&label=rela_articletagpub" target="_blank" title="举重女将陈燮霞">举重女将陈燮霞</A></P><P class="recoatlis_aut CP_linkb"><A href="http://blog.sina.com.cn/u/1282195067" target="_blank">张大姐</A></P></LI>		<LI><P><A href="http://blog.sina.com.cn/s/blog_483169380100aaza.html~type=v5_one&label=rela_articletagpub" target="_blank" title="很八卦地看奥运">很八卦地看奥运</A></P><P class="recoatlis_aut CP_linkb"><A href="http://blog.sina.com.cn/u/1211197752" target="_blank">小猪婆</A></P></LI>		<LI><P><A href="http://blog.sina.com.cn/s/blog_4bbeac3c0100ac1d.html~type=v5_one&label=rela_articletagpub" target="_blank" title="景一观察：奥运VS创投年">景一观察：奥运VS创投年</A></P><P class="recoatlis_aut CP_linkb"><A href="http://blog.sina.com.cn/u/1270787132" target="_blank">景一</A></P></LI>		<LI><P><A href="http://blog.sina.com.cn/s/blog_4fd3030e0100b2o3.html~type=v5_one&label=rela_articletagpub" target="_blank" title="陈燮霞,我们为你骄傲!!!">陈燮霞,我们为你骄傲!!!</A></P><P class="recoatlis_aut CP_linkb"><A href="http://blog.sina.com.cn/u/1339228942" target="_blank">潮汐霓虹</A></P></LI>		<LI><P><A href="http://blog.sina.com.cn/s/blog_4890d0e30100ayif.html~type=v5_one&label=rela_articletagpub" target="_blank" title="冯唐易老，李广难封">冯唐易老，李广难封</A></P><P class="recoatlis_aut CP_linkb"><A href="http://blog.sina.com.cn/u/1217450211" target="_blank">狼郎ll</A></P></LI>		<LI><P><A href="http://blog.sina.com.cn/s/blog_4d036e910100b0m2.html~type=v5_one&label=rela_articletagpub" target="_blank" title="中国首金900万，陈燮霞压力上千">中国首金900万，陈燮霞压力上千</A></P><P class="recoatlis_aut CP_linkb"><A href="http://blog.sina.com.cn/u/1292070545" target="_blank">钟典</A></P></LI>		<LI><P><A href="http://blog.sina.com.cn/s/blog_508d86650100akgp.html~type=v5_one&label=rela_articletagpub" target="_blank" title="武术,奥运的遗憾,还是遗憾的奥">武术,奥运的遗憾,还是遗憾的奥</A></P><P class="recoatlis_aut CP_linkb"><A href="http://blog.sina.com.cn/u/1351452261" target="_blank">程学江</A></P></LI></UL></DIV><DIV class="recoline"></DIV><DIV class="CP_j_linedot CP_j_linedot2"></DIV><DIV class="recopholis">
	<UL>
			<LI>
		<P><A onclick="v5SendLog(&#39;v5_one&#39;,&#39;rela_pic_117&#39;);" href="http://blog.sina.com.cn/s/blog_47850a750100dgdf.html?tj=1" target="_blank"><IMG src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/U1775P346T8D111620F4336DT20090527141519_width_80.jpg" width="80" height="58" alt="&ldquo;粽子&rdquo;女郎饱眼福" border="0"></A></P>
		<P><A onclick="v5SendLog(&#39;v5_one&#39;,&#39;rela_pic_117&#39;);" href="http://blog.sina.com.cn/s/blog_47850a750100dgdf.html?tj=1" target="_blank">“粽子”女郎饱眼福</A></P>
	</LI>
	<LI>
		<P><A onclick="v5SendLog(&#39;v5_one&#39;,&#39;rela_pic_117&#39;);" href="http://blog.sina.com.cn/s/blog_496cc9f30100db8r.html?tj=1" target="_blank"><IMG src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/U3370P346T8D111617F4336DT20090527135337_width_80.jpg" width="80" height="58" alt="自然光拍摄大明星" border="0"></A></P>
		<P><A onclick="v5SendLog(&#39;v5_one&#39;,&#39;rela_pic_117&#39;);" href="http://blog.sina.com.cn/s/blog_496cc9f30100db8r.html?tj=1" target="_blank">自然光拍摄大明星</A></P>
	</LI>
	<LI>
		<P><A onclick="v5SendLog(&#39;v5_one&#39;,&#39;rela_pic_117&#39;);" href="http://blog.sina.com.cn/s/blog_5e4979b30100dt0o.html?tj=1" target="_blank"><IMG src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/U1775P346T8D111614F4336DT20090527134159_width_80.jpg" width="80" height="58" alt="梨涡小美女貌比秀兰邓波儿" border="0"></A></P>
		<P><A onclick="v5SendLog(&#39;v5_one&#39;,&#39;rela_pic_117&#39;);" href="http://blog.sina.com.cn/s/blog_5e4979b30100dt0o.html?tj=1" target="_blank">梨涡小美女貌比秀兰邓波儿</A></P>
	</LI>
	<LI>
		<P><A onclick="v5SendLog(&#39;v5_one&#39;,&#39;rela_pic_117&#39;);" href="http://blog.sina.com.cn/s/blog_5d1164980100dvkw.html?tj=1" target="_blank"><IMG src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/U1775P346T8D111598F4336DT20090527112259_width_80.jpg" width="80" height="58" alt="玉背红唇&hellip;&hellip;" border="0"></A></P>
		<P><A onclick="v5SendLog(&#39;v5_one&#39;,&#39;rela_pic_117&#39;);" href="http://blog.sina.com.cn/s/blog_5d1164980100dvkw.html?tj=1" target="_blank">玉背红唇……</A></P>
	</LI>
	<LI>
		<P><A onclick="v5SendLog(&#39;v5_one&#39;,&#39;rela_pic_117&#39;);" href="http://blog.sina.com.cn/s/blog_488eb3fe0100dbay.html?tj=1" target="_blank"><IMG src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/U1775P346T8D111595F4336DT20090527111058_width_80.jpg" width="80" height="58" alt="巧做江南特色端午家宴" border="0"></A></P>
		<P><A onclick="v5SendLog(&#39;v5_one&#39;,&#39;rela_pic_117&#39;);" href="http://blog.sina.com.cn/s/blog_488eb3fe0100dbay.html?tj=1" target="_blank">巧做江南特色端午家宴</A></P>
	</LI>
	<LI>
		<P><A onclick="v5SendLog(&#39;v5_one&#39;,&#39;rela_pic_117&#39;);" href="http://blog.sina.com.cn/s/blog_537719ca0100d4mv.html?tj=1" target="_blank"><IMG src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/U1775P346T8D111593F4336DT20090527110837_width_80.jpg" width="80" height="58" alt="依依不舍学生时代" border="0"></A></P>
		<P><A onclick="v5SendLog(&#39;v5_one&#39;,&#39;rela_pic_117&#39;);" href="http://blog.sina.com.cn/s/blog_537719ca0100d4mv.html?tj=1" target="_blank">依依不舍学生时代</A></P>
	</LI>

	</UL>
 </DIV>
<DIV class="CP_j_linedot CP_j_linedot2"></DIV><DIV class="recomore"><A target="_blank" href="http://search.blog.sina.com.cn/blog/search?q=%B3%C2%DB%C6%CF%BC&tag=&s=0&t=tag">查看更多&gt;&gt;</A></DIV></DIV>
          <DIV class="componentBottom"></DIV>
        </DIV>	 
		        <DIV class="component" id="module_904" load_style="1">
          <DIV class="componentBar">
          <SPAN class="title">推荐博文</SPAN>
          </DIV>
          <DIV class="componentContent"><DIV class="recoatlis2"><UL><LI><P><A href="http://blog.sina.com.cn/s/blog_5137be260100dij3.html?tj=1" target="_blank" title="虽然笨拙但是方向正确">虽然笨拙但是方向正确</A></P><P class="recoatlis_aut CP_linkb"><A target="_blank" href="http://blog.sina.com.cn/u/1362607654">黄健翔</A></P></LI><LI><P><A href="http://blog.sina.com.cn/s/blog_5085d2cc0100dobi.html?tj=1" target="_blank" title="关于屈原之死的两种说法">关于屈原之死的两种说法</A></P><P class="recoatlis_aut CP_linkb"><A target="_blank" href="http://blog.sina.com.cn/u/1350947532">品牌中国王永</A></P></LI><LI><P><A href="http://blog.sina.com.cn/s/blog_4ae5943b0100d6s0.html?tj=1" target="_blank" title="高考降温：&ldquo;父辈就业时代&rdquo;的沉重真相">高考降温：“父辈就业时代”的</A></P><P class="recoatlis_aut CP_linkb"><A target="_blank" href="http://blog.sina.com.cn/u/1256559675">王石川</A></P></LI><LI><P><A href="http://blog.sina.com.cn/s/blog_483e45630100dkxk.html?tj=1" target="_blank" title="笑看大学校园男女博士们的雷人戏水照">笑看大学校园男女博士们的雷人</A></P><P class="recoatlis_aut CP_linkb"><A target="_blank" href="http://blog.sina.com.cn/u/1212040547">江小鱼</A></P></LI><LI><P><A href="http://blog.sina.com.cn/s/blog_5b7c0c3e0100ejym.html?tj=1" target="_blank" title="谁在挑战法律，谁在挑战民意">谁在挑战法律，谁在挑战民意</A></P><P class="recoatlis_aut CP_linkb"><A target="_blank" href="http://blog.sina.com.cn/u/1534856254">中正述评</A></P></LI><LI><P><A href="http://blog.sina.com.cn/s/blog_475b1d720100dvzp.html?tj=1" target="_blank" title="什刹海">什刹海</A></P><P class="recoatlis_aut CP_linkb"><A target="_blank" href="http://blog.sina.com.cn/u/1197153650">春日迟迟（陈彤）</A></P></LI><LI><P><A href="http://blog.sina.com.cn/s/blog_4fb803a90100dzrm.html?tj=1" target="_blank" title="卢武铉的最后时刻">卢武铉的最后时刻</A></P><P class="recoatlis_aut CP_linkb"><A target="_blank" href="http://blog.sina.com.cn/u/1337459625">新世纪周刊</A></P></LI><LI><P><A href="http://blog.sina.com.cn/s/blog_489548eb0100czd2.html?tj=1" target="_blank" title="今日感慨：用麻将建设和谐社会">今日感慨：用麻将建设和谐社会</A></P><P class="recoatlis_aut CP_linkb"><A target="_blank" href="http://blog.sina.com.cn/u/1217743083">袁岳</A></P></LI><LI><P><A href="http://blog.sina.com.cn/s/blog_605b13570100d216.html?tj=1" target="_blank" title="我的父亲">我的父亲</A></P><P class="recoatlis_aut CP_linkb"><A target="_blank" href="http://blog.sina.com.cn/u/1616581463">筱笑</A></P></LI><LI><P><A href="http://blog.sina.com.cn/s/blog_534535970100diy1.html?tj=1" target="_blank" title="逼平德国并不重要，重要的是不断有所进步">逼平德国并不重要，重要的是不</A></P><P class="recoatlis_aut CP_linkb"><A target="_blank" href="http://blog.sina.com.cn/u/1397044631">郎效农博客</A></P></LI></UL></DIV><DIV class="recoline"></DIV><DIV class="recomore"><A href="http://blog.sina.com.cn/lm/114/117/day.html" target="_blank">查看全部</A>&gt;&gt;</DIV></DIV>
          <DIV class="componentBottom"></DIV>
        </DIV>	         <DIV class="component" id="module_47" load_style="1" style="display: block; ">
          <DIV class="componentBar">
          <SPAN class="title floatLeft">谁看过这篇博文</SPAN>
          </DIV>
          <DIV class="componentContent"><DIV class="nodata2">暂无访客。</DIV></DIV>
          <DIV class="componentBottom"></DIV>
        </DIV>	 
      </DIV>
      
    </DIV>
    <DIV class="clear"></DIV>
</DIV>
<SCRIPT type="text/javascript" charset="utf-8" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/sina_blog_foot.js"></SCRIPT>  <DIV class="sinaBottom">    <CENTER>      <A target="_blank" href="http://blog.sina.com.cn/admin/advice/advice_list.php">新浪BLOG意见反馈留言板</A>　<A onclick="window.open (&#39;http://control.blog.sina.com.cn/admin/advice/impeach.php?url=http%3A//blog.sina.com.cn/s/blog_4ad0f8b4010004wt.html%7Etype%3Dv5_one%26label%3Drela_nextarticle&#39;, &#39;&#39;,&#39;height=495, width=510, top=0, left=0, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=n o, status=no&#39;);" href="javascript:;">不良信息反馈</A>　电话：95105670 提示音后按2键（按当地市话标准计费）　欢迎批评指正    </CENTER>    <P> <A target="_blank" href="http://corp.sina.com.cn/chn/">新浪简介</A> | <A target="_blank" href="http://corp.sina.com.cn/eng/">About Sina</A> | <A target="_blank" href="http://ads.sina.com.cn/">广告服务</A> | <A target="_blank" href="http://www.sina.com.cn/contactus.html">联系我们</A> | <A target="_blank" href="http://corp.sina.com.cn/chn/sina_job.html">招聘信息</A> | <A target="_blank" href="http://www.sina.com.cn/intro/lawfirm.shtml">网站律师</A> | <A target="_blank" href="http://english.sina.com/">SINA English</A> | <A target="_blank" href="http://members.sina.com.cn/apply/">会员注册</A> | <A target="_blank" href="http://blog.sina.com.cn/lm/help/2009/index.html">产品答疑</A> </P>    <P class="copyright"> Copyright © 1996 - 2009 SINA Corporation,  All Rights Reserved  <BR>    </P>    <DIV>新浪公司 <A target="_blank" href="http://www.sina.com.cn/intro/copyright.shtml">版权所有</A></DIV>  </DIV>
</DIV>
<SPAN name="pvcounter" pid="1" key="4ad0f8b4010004wt" url="http://blog.sina.com.cn/s/blog_4ad0f8b4010004wt.html" expara="" style="display:none"></SPAN>
	   <SCRIPT id="PVCOUNTER_FORIE" type="text/javascript"></SCRIPT>
	    


<IFRAME id="webIM_Conn_Iframe" style="width:1px;height:1px;position:absolute;left:1px;top:1px;filter:alpha(opacity=0);-moz-opacity:0;"></IFRAME>
<DIV id="webIM_Conn_Connect">
</DIV>


<SCRIPT>var __sayon_webim_msg_pop__ = false;</SCRIPT> 
<SCRIPT src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/webim.compressed.js"></SCRIPT>
<SCRIPT type="text/javascript">loadResource();</SCRIPT><SCRIPT id="" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/article.js" charset="utf-8"></SCRIPT>
<SCRIPT type="text/javascript">renderPage();</SCRIPT>
<SCRIPT type="text/javascript">
<!--
	SinaSysTray.pro_init();
//-->
</SCRIPT>
<SCRIPT type="text/javascript">
// 登陆后输出登陆者的UID
if($UID != null){
	webIM($UID);
}
</SCRIPT>

<SCRIPT type="text/javascript">
if($UID != null && $UID != scope.$uid){
	dwScript({url:"http://footprint.cws.api.sina.com.cn/add.php?pid=1&uid=" + scope.$uid + (typeof scope.$articleid != "undefined" ? "&subid=" + scope.$articleid : "") + "&varname=addNewVisitor"}); } 
</SCRIPT>
<SCRIPT type="text/javascript" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/pvcounter.js"></SCRIPT><SCRIPT type="text/javascript" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/pvcounter"></SCRIPT>
<SCRIPT type="text/javascript" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/680.js"></SCRIPT><DIV id="xp" style="position: absolute; z-index: 9000; overflow-x: hidden; overflow-y: hidden; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(255, 0, 0); border-right-color: rgb(255, 0, 0); border-bottom-color: rgb(255, 0, 0); border-left-color: rgb(255, 0, 0); left: 749px; top: 627px; width: 260px; height: 0px; "><DIV id="xp_content" style="position: absolute; z-index: 1; overflow-x: hidden; overflow-y: hidden; border-left-width: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; width: 260px; height: 190px; left: 0px; top: 0px; "><A id="closeButton" href="http://blog.sina.com.cn/s/blog_4ad0f8b4010004wt.html~type=v5_one&label=rela_nextarticle#" style="position: absolute; z-index: 2; font-size: 0px; line-height: 0px; left: 240px; top: 6px; width: 15px; height: 15px; background-image: url(http://i1.sinaimg.cn/blog/mini/08olympic/blogrecommend_hz_003.gif); "></A><A id="switchButton" href="http://blog.sina.com.cn/s/blog_4ad0f8b4010004wt.html~type=v5_one&label=rela_nextarticle#" style="position: absolute; z-index: 2; font-size: 0px; line-height: 0px; left: 220px; top: 6px; width: 15px; height: 15px; background-image: url(http://i2.sinaimg.cn/blog/mini/08olympic/blogrecommend_hz_004.gif); "></A><DIV id="ifm_div" style="height:190px;"><IFRAME id="xp_content_iframe" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/01.htm" frameborder="0" scrolling="no" width="100%" height="100%"></IFRAME></DIV></DIV></DIV>
 
<!-- SUDA_CODE_START -->
<SCRIPT type="text/javascript" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/suda_s_v851c.js"></SCRIPT><DIV style="position:absolute;top:0;left:0;width:0;height:0;z-index:1"><DIV style="position:absolute;top:0;left:0;width:1;height:1;"><IFRAME id="SUDA_FC" src="" width="1" height="1" scrolling="NO" frameborder="0"></IFRAME></DIV><DIV style="position:absolute;top:0;left:0;width:0;height:0;visibility:hidden" id="SUDA_CS_DIV"><IMG width="0" height="0" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/a.gif" border="0" alt=""></DIV></DIV>
<SCRIPT type="text/javascript">
//<!--
try{
var config_pic = config?(config.common?((config.common.head || config.common.head)?((config.common.head.usepic || config.common.bg.usepic)?((config.common.head.usepic=='1')||(config.common.bg.usepic=='1')?1:0):0):0):0):0;
_S_pSt(_S_PID_,config.common.t,config.common.r+","+config_pic);
}catch(e){}
//-->
</SCRIPT>
<!-- SUDA_CODE_END -->
  
  
<!-- START WRating v1.0 -->
<SCRIPT type="text/javascript" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/a1.js"></SCRIPT>
<SCRIPT type="text/javascript">
try{
var vjAcc="860010-0328010000"; 
var wrUrl="http://sina.wrating.com/";
vjTrack("");
}catch(e){};
</SCRIPT><DIV style="display:none"><IMG src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/a(1).gif" id="wrTagImage" width="1" height="1"></DIV>
<NOSCRIPT></NOSCRIPT>
<!-- END WRating v1.0 -->

<!-- SSO_CODE_START -->
<SCRIPT language="JavaScript">
<!--
 if($UID != null){
  document.write("<scr" + "ipt charset='utf-8' src='http://image2.sina.com.cn/unipro/js/ssologin.js'></scr" + "ipt>"); 
 }
//-->
</SCRIPT>
<!-- SSO_CODE_END -->


<SCRIPT id="scriptId_0.45391115453094244" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/num" charset="utf-8"></SCRIPT><SCRIPT src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/collect" id="scriptId_0.70426195114851" charset="UTF-8"></SCRIPT><DIV id="ijax_iframes"><IFRAME id="loadingIframe_thread2123" name="loadingIframe_thread2123" class="invisible" scrolling="no" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/117_day.v1.htm" allowtransparency="true" style="display:none;" frameborder="0"></IFRAME><IFRAME id="loadingIframe_thread17005" name="loadingIframe_thread17005" class="invisible" scrolling="no" src="./阴影(shadow Volume)程序注释二_荒人_新浪博客_files/sort_117_2_v1.htm" allowtransparency="true" style="display:none;" frameborder="0"></IFRAME></DIV><DIV id="ramdomVisitDiv" style="position: absolute; top: 43px; width: 100px; right: 0px; "><EMBED type="application/x-shockwave-flash" src="http://simg.sinajs.cn/common/swf/rndView.swf" width="100" height="120" style="undefined" id="map" name="map" bgcolor="#000" quality="high" scale="noscale" allowscriptaccess="always" wmode="transparent" flashvars="target=_self&amp;URL="></DIV></BODY></HTML>